{
    "category": "claude_code",
    "question": "I need you to implement a comprehensive critical issue hotfix workflow for the repository that demonstrates advanced PR management, selective merging, and issue resolution tracking.\n\n**Step 1: Create Critical Bug Tracking Issue**\nCreate a new issue with:\n- Title: \"CRITICAL: Memory and Context Management Issues - Hotfix Tracking\"\n- Body must include:\n  - A \"## Critical Issues\" heading listing issues #49 and #46\n  - A \"## Impact Assessment\" heading describing user impact\n  - A \"## Resolution Strategy\" heading with planned approach\n  - References to existing issues #49, #46, and #47 using \"#\" notation\n  - Keywords: \"memory exhaustion\", \"context auto-compact\", \"JavaScript heap\", \"hotfix priority\"\n\n**Step 2: Create Memory Optimization Hotfix Branch**\nCreate a new branch called 'hotfix/memory-optimization-v1.0.72' from the main branch.\n\n**Step 3: Implement Memory Management Documentation**\nOn the hotfix branch, create the file `docs/MEMORY_OPTIMIZATION.md` with this exact content:\n```markdown\n# Memory Optimization Guide for Claude Code v1.0.72\n\n## Overview\nThis document addresses critical memory issues identified in issues #49 and #46.\n\n## Memory Management Issues\n\n### Context Auto-Compact Problem (Issue #49)\n- **Root Cause**: Context management stuck at 0% completion\n- **Impact**: Tool becomes unusable on macOS platforms\n- **Solution**: Implement progressive context cleanup with configurable thresholds\n\n### JavaScript Heap Exhaustion (Issue #46)\n- **Root Cause**: Memory allocation failure during large MCP operations\n- **Impact**: Complete Claude Code crash requiring restart\n- **Solution**: Add streaming data processing and garbage collection optimization\n\n## Optimization Strategies\n\n### Immediate Fixes\n1. **Context Buffer Management**\n   - Implement 10MB default context buffer limit\n   - Add automatic context pruning at 80% threshold\n   - Enable manual context reset via `/memory-reset` command\n\n2. **MCP Operation Streaming**\n   - Process large datasets in 1MB chunks\n   - Implement backpressure for MongoDB operations\n   - Add memory usage monitoring and alerts\n\n### Configuration Options\n```json\n{\n  \"memory\": {\n    \"contextBufferLimit\": \"10MB\",\n    \"autoCompactThreshold\": 0.8,\n    \"streamingChunkSize\": \"1MB\",\n    \"gcOptimization\": true\n  }\n}\n```\n\n## Related Issues\n- Fixes issue #49: Context auto-compact functionality\n- Addresses issue #46: JavaScript heap out of memory crashes\n- Related to issue #47: Cross-project hook execution problems\n```\n```\n\n**Step 4: Create Pull Request with Issue Cross-References**\nCreate a pull request from 'hotfix/memory-optimization-v1.0.72' to 'main' with:\n- Title: \"HOTFIX: Critical memory optimization for issues #49 and #46\"\n- Body must include:\n  - A \"## Summary\" heading describing the memory fixes\n  - A \"## Critical Issues Addressed\" heading listing specific problems\n  - A \"## Documentation Changes\" heading describing the new guide\n  - \"Addresses #49\" and \"Addresses #46\" pattern linking to existing issues\n  - Reference to your tracking issue using \"Tracked in #[ISSUE_NUMBER]\"\n  - Keywords: \"memory optimization\", \"context management\", \"heap exhaustion\", \"v1.0.72 hotfix\"\n\n**Step 5: Update and Merge PR #51 (Statsig Logging)**\nFor the existing PR #51:\n- Update the PR description to include technical implementation details\n- Add a \"## Technical Implementation\" section mentioning \"event logging integration\"\n- Add keywords: \"workflow enhancement\", \"issue management automation\", \"logging consistency\"\n- Merge the PR using the squash merge method\n\n**Step 6: Add Implementation Comment to Tracking Issue**\nAdd a comment to your original tracking issue with:\n- Reference to your hotfix PR using \"PR #[NUMBER]\" pattern\n- Reference to actions taken on PR #51\n- Technical details about the memory optimization approach\n- Keywords: \"context buffer management\", \"streaming optimization\", \"progressive cleanup\"\n- Mention of configuration options and thresholds\n\n**Step 7: Close Tracking Issue with Resolution Summary**\nClose your tracking issue by updating its state to 'closed' with:\n- A final comment summarizing completed actions\n- Reference to merged PR #51 and pending hotfix PR\n- Keywords: \"hotfix deployment\", \"memory issues resolved\", \"documentation updated\"",
    "use_specified_server": true,
    "mcp_servers": [
        {
            "name": "github_mcpmark"
        }
    ],
    "evaluators": [
        {
            "func": "raw",
            "op": "mcpmark_github.verify_critical_hotfix_workflow",
            "value": "completed",
            "op_args": {
                "owner": "{{GITHUB_EVAL_ORG}}",
                "repo": "claude-code",
                "hotfix_branch": "hotfix/memory-optimization-v1.0.72"
            },
            "desc": "Verify that hotfix workflow is correctly implemented with branch, documentation, and issue references"
        }
    ],
    "prepares": [
        {
            "prepare_func": "mcpmark_github_setup",
            "prepare_args": {}
        }
    ],
    "cleanups": [
        {
            "server": "mcpmark",
            "tool": "",
            "cleanup_func": "github_cleanup",
            "cleanup_args": {}
        }
    ]
}
