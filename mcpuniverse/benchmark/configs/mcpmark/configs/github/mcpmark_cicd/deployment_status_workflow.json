{
    "category": "mcpmark_cicd",
    "question": "I need you to create a Deployment Status workflow for this Node.js project. The project currently has no GitHub Actions workflows, so you'll be building a deployment-focused CI/CD workflow from scratch that responds to push events on the main branch. Here's what needs to be implemented:\n\n## Deployment Status Workflow\n\nCreate `.github/workflows/deployment-status.yml` that triggers on `push` to `main` branch with these sequential jobs:\n\n### 1. **pre-deployment** job (name: `pre-deployment`):\n   - Runs basic quality checks (lint and test)\n   - Creates deployment tracking issue with title: \"Deployment Tracking - [commit-sha]\"\n   - Adds labels: `deployment`, `in-progress`\n   - Captures previous commit SHA and package version information\n   - Posts comment containing \"Pre-deployment checks completed\"\n\n### 2. **rollback-preparation** job (name: `rollback-preparation`):\n   - Depends on: pre-deployment\n   - Creates comprehensive rollback artifacts including:\n     * Executable rollback script with proper error handling\n     * Configuration backups (package.json, package-lock.json, environment templates)\n     * Dependency verification script for compatibility checking\n     * Detailed rollback documentation with step-by-step instructions\n     * Compressed rollback package with SHA256 checksums\n   - Uploads rollback artifacts to GitHub Actions with 30-day retention\n   - Posts comment on deployment issue that MUST contain the following verifiable elements:\n     * Title: \"ðŸ”„ Rollback Plan Ready\"\n     * Previous commit SHA (format: \"Previous Commit: [sha]\")\n     * Current commit SHA (format: \"Current Commit: [sha]\")\n     * Package version (format: \"Package Version: [version]\")\n     * Artifact name (format: \"Artifact: rollback-package-[commit-sha]\")\n     * At least 5 checkmarks (âœ…) indicating completed rollback components\n     * Quick rollback command section with bash code block\n     * Script verification status: \"Rollback script created: true\"\n     * Backup verification status: \"Configuration backup: true\"\n     * Artifact checksum (format: \"SHA256: [checksum-value]\")\n\n### 3. **post-deployment** job (name: `post-deployment`):\n   - Depends on: rollback-preparation\n   - Removes `in-progress` label and adds `completed` label\n   - Posts final comment containing \"Deployment Completed Successfully\" with rollback artifact details\n   - Closes the deployment tracking issue\n\n## Implementation Requirements:\n\n**Step 1: Create Feature Branch**\nCreate a new branch called `deployment-status-workflow` from main.\n\n**Step 2: Implement the Workflow**\nCreate `.github/workflows/deployment-status.yml` with proper YAML syntax:\n- Trigger only on push to main branch\n- Sequential job execution: pre-deployment â†’ rollback-preparation â†’ post-deployment\n- Use github-script actions for issue management\n- Avoid identifier conflicts in github-script actions (don't redeclare 'github')\n- Include proper error handling and script validation\n- Implement comprehensive rollback artifact creation and verification\n- Use proper fetch-depth for accessing commit history\n- Include artifact upload/download capabilities with checksums\n\n**Step 3: Create and Merge Pull Request**\nCreate a comprehensive pull request and merge it to main:\n- Title: \"Implement Deployment Status Workflow\"\n- Detailed description of the workflow and its purpose\n- Merge the pull request to main branch to trigger the deployment workflow",
    "use_specified_server": true,
    "mcp_servers": [
        {
            "name": "github_mcpmark"
        }
    ],
    "evaluators": [
        {
            "func": "raw",
            "op": "mcpmark_github.verify_deployment_status_workflow",
            "value": "completed",
            "op_args": {
                "owner": "{{GITHUB_EVAL_ORG}}",
                "repo": "mcpmark-cicd"
            },
            "desc": "Verify deployment status workflow with pre-deployment, rollback-preparation, and post-deployment jobs"
        }
    ],
    "prepares": [
        {
            "prepare_func": "mcpmark_github_setup",
            "prepare_args": {}
        }
    ],
    "cleanups": [
        {
            "server": "mcpmark",
            "tool": "",
            "cleanup_func": "github_cleanup",
            "cleanup_args": {}
        }
    ]
}
