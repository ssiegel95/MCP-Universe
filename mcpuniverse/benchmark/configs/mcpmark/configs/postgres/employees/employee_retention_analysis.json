{
    "category": "employees",
    "question": "Analyze employee retention patterns and identify factors contributing to turnover across the organization. The HR leadership team needs comprehensive insights to develop targeted retention strategies and reduce costly employee attrition.\n\n## Your Tasks:\n\n1. **Create the retention analysis table** — build a table called `employee_retention_analysis` in the `employees` schema with these exact columns:\n   * `department_name` (varchar) — the department name\n   * `total_employees_ever` (integer) — total number of employees who have ever worked in this department\n   * `current_employees` (integer) — number of current employees in the department\n   * `former_employees` (integer) — number of employees who left the department\n   * `retention_rate` (decimal) — percentage of employees still with the company (current/total * 100)\n\n2. **Create the high-risk employee identification table** — build a table called `high_risk_employees` in the `employees` schema with:\n   * `employee_id` (bigint) — the employee's ID  \n   * `full_name` (varchar) — concatenated first and last name\n   * `current_department` (varchar) — current department name\n   * `tenure_days` (integer) — days with the company\n   * `current_salary` (integer) — current salary amount\n   * `risk_category` (varchar) — risk level ('high_risk', 'medium_risk', 'low_risk')\n   \n   **Note**: Analyze only current employees (those with active salary records where to_date = '9999-01-01').\n\n3. **Create the turnover trend analysis table** — build a table called `turnover_trend_analysis` in the `employees` schema with:\n   * `departure_year` (integer) — year when employees left (extract from to_date of salary records)\n   * `departures_count` (integer) — number of employees who left that year\n   * `avg_tenure_days` (decimal) — average tenure in days for employees who left that year",
    "use_specified_server": true,
    "mcp_servers": [
        {
            "name": "postgres-pro"
        }
    ],
    "output_format": {
        "retention_status": "Employee retention analysis completion status"
    },
    "evaluators": [
        {
            "func": "raw",
            "op": "postgres_employee_retention_verifier",
            "value": "completed",
            "op_args": {},
            "desc": "Check if the AI agent completed the employee retention analysis"
        }
    ],
    "prepares": [
        {
            "prepare_func": "mcpmark_postgres_setup",
            "prepare_args": {}
        }
    ],
    "cleanups": [
        {
            "server": "mcpmark",
            "tool": "",
            "cleanup_func": "postgres_cleanup",
            "cleanup_args": {}
        }
    ]
}