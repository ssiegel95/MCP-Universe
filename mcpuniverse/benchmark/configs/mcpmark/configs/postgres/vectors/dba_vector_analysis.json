{
    "category": "vectors",
    "question": "# PostgreSQL Vector Database Analysis\n\n> Analyze and optimize a pgvector-powered database to understand storage patterns, performance characteristics, and data quality for embeddings in production workloads.\n\n## What's this about?\n\nYou've got a PostgreSQL database running with the vector extension that stores embeddings for RAG (document similarity search, image recognition), or other ML workloads.\nYour job is to dive deep into this vector database and figure out what's going on under the hood.\nYou need to understand:\n\n- how vectors are stored\n- how much space they're taking up\n- whether indexes are working properly\n- if there are any data quality issues lurking around\n\n## What you need to investigate\n\nFirst, get familiar with what you're working with:\n\n- Check vector extension status: ensuring it's installed properly, check version, identify any configuration issues\n- Identify all vector columns across entire database: providing me columns, types of columns, and vector dim (dimensions)\n- Map the vector landscape: understand relationships between vector tables and regular tables, foreign keys, dependencies\n\nVectors can eat up a lot of storage, so let's see where the bytes are going:\n\n- Calculate vector storage overhead: measure how much space vectors take compared to regular columns in same tables\n- Analyze table sizes: identify which vector tables are biggest storage consumers, break down by table\n- Understand growth patterns: examine record counts and project future storage needs based on current data\n\nVectors without proper indexes are painfully slow, so investigate:\n\n- Check index coverage: identify which vector columns have indexes, what type (ivfflat, hnsw), and their parameters\n- Analyze index effectiveness: examine index usage stats, selectivity, and performance characteristics\n- Identify missing indexes: find vector columns that need indexing for better query performance",
    "use_specified_server": true,
    "mcp_servers": [
        {
            "name": "postgres-pro"
        }
    ],
    "output_format": {
        "analysis_status": "Vector database analysis completion report"
    },
    "prepares": [
        {
            "prepare_func": "mcpmark_postgres_setup",
            "prepare_args": {}
        }
    ],
    "evaluators": [
        {
            "func": "raw",
            "op": "postgres_dba_vector_analysis_verifier",
            "value": "completed",
            "op_args": {},
            "desc": "Check if the AI agent completed the vector database analysis with all required components"
        }
    ],
    "cleanups": [
        {
            "server": "mcpmark",
            "tool": "",
            "cleanup_func": "postgres_cleanup",
            "cleanup_args": {}
        }
    ]
}